"use strict";const designLegend=document.querySelector(".js-designLegend"),design=document.querySelector(".js-design"),designArrow=document.querySelector(".js-designArrow"),fill=document.querySelector(".js-desplegable"),form2=document.querySelector(".js-fieldset"),arrowUp=document.querySelector(".js-icon-rellena"),shareLegend=document.querySelector(".js-title_share"),share=document.querySelector(".js-share"),shareArrow=document.querySelector(".js-shareArrow"),previewContainer=document.querySelector(".js-preview-container"),radioButton1=document.querySelector(".js-input-1"),radioButton2=document.querySelector(".js-input-2"),radioButton3=document.querySelector(".js-input-3"),fillForm=document.querySelector(".js-fieldset"),previewName=document.querySelector(".js-preview-name"),previewJob=document.querySelector(".js-preview-job"),previewPhone=document.querySelector(".js-preview-phone"),previewEmail=document.querySelector(".js-preview-email"),previewLinkedin=document.querySelector(".js-preview-linkedin"),previewGithub=document.querySelector(".js-preview-github"),resetImage=document.querySelector(".js_reset_image"),resetPreviewImg=document.querySelector(".js_reset_previewimg"),generatedUrl=document.querySelector(".js_shareUrl"),shareOnTwitter=document.querySelector(".js_shareTwitter"),savedData=JSON.parse(localStorage.getItem("savedData")),messageCard=document.querySelector(".js-text-share"),fileField=document.querySelector(".js__profile-upload-btn"),profileImage=document.querySelector(".js__profile-image"),profilePreview=document.querySelector(".js__profile-preview"),data=savedData||{palette:"",name:"",job:"",email:"",phone:"",linkedin:"",github:"",photo:"./assets/images/gatito.jpg"},btn=document.querySelector(".js_bntCreate"),shareCardSection=document.querySelector(".js-shareCard"),buttonReset=document.querySelector(".js_buttonReset");let resetInput=document.querySelectorAll(".js_resetInput");function resetCard(){previewName.innerHTML="Nombre Apellido",previewJob.innerHTML="Front-end developer",btn.classList.remove("js-greyButton"),shareCardSection.classList.add("js-createHidden"),resetImage.style.backgroundImage="",resetPreviewImg.style.backgroundImage="",previewContainer.classList.add("palette-1"),previewContainer.classList.remove("palette-2"),previewContainer.classList.remove("palette-3"),radioButton1.checked="",radioButton2.checked="",radioButton3.checked=""}function handleClickReset(e){e.preventDefault();for(const e of resetInput)e.value="";localStorage.removeItem("savedData"),resetCard()}function hiddeFieldset(e){e.preventDefault(),form2.classList.contains("collapsed")&&arrowUp.classList.contains("fa-transform")?(form2.classList.remove("collapsed"),arrowUp.classList.remove("fa-transform"),design.classList.add("collapsed"),designArrow.classList.add("fa-transform"),share.classList.add("collapsed"),shareArrow.classList.add("fa-transform")):(form2.classList.add("collapsed"),arrowUp.classList.add("fa-transform"))}function handleClickDesign(e){e.preventDefault(),design.classList.contains("collapsed")&&designArrow.classList.contains("fa-transform")?(design.classList.remove("collapsed"),designArrow.classList.remove("fa-transform"),form2.classList.add("collapsed"),arrowUp.classList.add("fa-transform"),share.classList.add("collapsed"),shareArrow.classList.add("fa-transform")):(design.classList.add("collapsed"),designArrow.classList.add("fa-transform"))}function handleClickShare(e){e.preventDefault(),share.classList.contains("collapsed")&&shareArrow.classList.contains("fa-transform")?(share.classList.remove("collapsed"),shareArrow.classList.remove("fa-transform"),design.classList.add("collapsed"),designArrow.classList.add("fa-transform"),form2.classList.add("collapsed"),arrowUp.classList.add("fa-transform")):(share.classList.add("collapsed"),shareArrow.classList.add("fa-transform"))}function handleClick1(){previewContainer.classList.remove("palette-2"),previewContainer.classList.remove("palette-3"),previewContainer.classList.add("palette-1")}function handleClick2(){previewContainer.classList.remove("palette-1"),previewContainer.classList.remove("palette-3"),previewContainer.classList.add("palette-2")}function handleClick3(){previewContainer.classList.remove("palette-1"),previewContainer.classList.remove("palette-2"),previewContainer.classList.add("palette-3")}function handleClicPalette(e){return data.palette=parseInt(e.currentTarget.id),data.palette}function listenersPalettes(){const e=document.querySelectorAll(".js-option-input");for(const t of e)t.addEventListener("click",handleClicPalette)}function renderPalette(e){1===e.palette?handleClick1():2===e.palette?handleClick2():3===e.palette&&handleClick3()}function handleKeyupInputs(e){e.preventDefault();const t=e.target;"name"===t.name?data.name=t.value:"job"===t.name?data.job=t.value:"email"===t.name?data.email=t.value:"phone"===t.name?data.phone=t.value:"linkedin"===t.name?data.linkedin=t.value:"github"===t.name&&(data.github=t.value),renderPreview(data),localStorage.setItem("savedData",JSON.stringify(data))}function renderPreview(e){""===e.name?previewName.innerHTML="Nombre Apellido":previewName.innerHTML=e.name,""===e.job?previewJob.innerHTML="Front-end developer":previewJob.innerHTML=e.job,previewPhone.href=e.phone,previewEmail.href="mailto:"+e.email,previewLinkedin.href=e.linkedin,previewGithub.href=e.github,profileImage.style.backgroundImage=`url(${e.photo})`,profilePreview.style.backgroundImage=`url(${e.photo})`}function renderOrNot(){renderPreview(data),renderPalette(data)}buttonReset.addEventListener("click",handleClickReset),fill.addEventListener("click",hiddeFieldset),designLegend.addEventListener("click",handleClickDesign),shareLegend.addEventListener("click",handleClickShare),radioButton1.addEventListener("click",handleClick1),radioButton2.addEventListener("click",handleClick2),radioButton3.addEventListener("click",handleClick3),listenersPalettes(),fillForm.addEventListener("keyup",handleKeyupInputs),renderOrNot();const fr=new FileReader;function getImage(e){const t=e.currentTarget.files[0];fr.addEventListener("load",writeImage),fr.readAsDataURL(t)}function writeImage(){profileImage.style.backgroundImage=`url(${fr.result})`,profilePreview.style.backgroundImage=`url(${fr.result})`,data.photo=fr.result,localStorage.setItem("savedData",JSON.stringify(data))}function changeColorButton(e){btn.classList.add("js-greyButton"),shareCardSection.classList.remove("js-createHidden")}function handlebntCreate(e){e.preventDefault(),""===data.palette||""===data.name||""===data.job||""===data.email||""===data.phone||""===data.linkedin||""===data.github||""===data.photo?messageCard.innerHTML="Debe rellenar todos los campos":(fetch("https://awesome-profile-cards.herokuapp.com/card/",{method:"POST",body:JSON.stringify(data),headers:{"content-type":"application/json"}}).then(e=>e.json()).then(e=>{console.log(e);const t=e.cardURL;generatedUrl.innerHTML=t,generatedUrl.href=t,shareOnTwitter.href="https://twitter.com/intent/tweet?text=Â¡Echa un ojo a mi tarjeta de contacto! "+t}),messageCard.innerHTML="",changeColorButton())}fileField.addEventListener("change",getImage),btn.addEventListener("click",handlebntCreate);